I"øF<h3 id="å‰è¨€">å‰è¨€</h3>

<p>ä¸Šä¸€ç« å¤§æ¦‚çš„èŠäº†ä¸€ä¸‹æˆ‘è®¾æƒ³ä¸­çš„ä½ä»£ç æ¨¡å¼åŸå‹ï¼Œå…¶ä¸­å°±æœ‰ä»£ç ç¼–è¾‘å™¨çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç« æ¥åˆ†äº«ä¸€ä¸‹æˆ‘çš„ç½‘é¡µç‰ˆä»£ç ç¼–è¾‘å™¨å¦‚ä½•å®ç°ã€‚</p>

<h3 id="monaco-editor">Monaco-Editor</h3>

<p>å‰ç«¯ä½¿ç”¨çš„æ˜¯VUEï¼Œå¾®è½¯å¼€æºäº†VSCodeå‰ç«¯ç‰ˆæ’ä»¶ï¼Œæˆ‘ä»¬å°±ç”¨è¿™ä¸ªæ’ä»¶æ¥åšä»£ç ç¼–è¾‘å™¨åŠŸèƒ½ï¼Œè™½ç„¶åŸºç¡€ç‰ˆåªæœ‰å‡ ç§å‰ç«¯çš„é«˜çº§æ”¯æŒï¼Œä½†æ˜¾ç¤ºä¸Šå·²ç»åŒ…å«å¾ˆå¤šè¯­è¨€çš„åŸºç¡€ç‰ˆæ”¯æŒäº†ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å®‰è£…</span>
npm <span class="nb">install </span>monaco-editor <span class="nt">-S</span>
</code></pre></div></div>

<p>æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰è¿™ä¸ªç»„ä»¶(ç±»ä¼¼javaçš„å°è£…)æ–¹ä¾¿åç»­çš„ç»„ä»¶å¼•å…¥ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨src-&gt;componentsä¸‹æ–°å»ºäº†ä¸€ä¸ªç»„ä»¶MonacoEditor.vueã€‚</p>

<p>ç”±äºæˆ‘çš„é¡¹ç›®ä¼˜å…ˆæ”¯æŒjavaæ‰€ä»¥æˆ‘é»˜è®¤æŠŠç»„ä»¶çš„è¯­è¨€è®¾ç½®ä¸ºjavaï¼Œè¿˜æœ‰ä¸€ä¸ªæ³¨æ„äº‹é¡¹çš„æ˜¯propsçš„å®šä¹‰ï¼Œè¿™ä¸ªå±æ€§ä¸‹é¢çš„å­å±æ€§æ˜¯å¯ä»¥åœ¨ç»„ä»¶ä½¿ç”¨æ—¶ä¼ å€¼è¿‡æ¥åŠ¨æ€è®¾ç½®ç»‘å®šçš„ï¼Œæˆ‘ä¹Ÿæ˜¯è·Ÿå‰ç«¯å¤§ä½¬å­¦çš„ä¸€æ‹›ï¼Œæˆ‘è‡ªå·±å¼€å‘çš„æ—¶å€™ä¸çŸ¥é“æ€ä¹ˆæ ¹æ®æ–‡ä»¶åç¼€æ¥åŠ¨æ€è®¾ç½®è¯­è¨€è‹¦æ¼äº†å¥½å‡ ä¸ªå°æ—¶ã€‚</p>

<div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">ref=</span><span class="s">"editorContainer"</span> <span class="na">class=</span><span class="s">"editor"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">monaco</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">monaco-editor</span><span class="dl">'</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MonacoEditor</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">code</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
    <span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">java</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">editor</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">()</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// åˆå§‹åŒ–ç¼–è¾‘å™¨</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">language</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">properties</span><span class="dl">'</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">language</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">yaml</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">editor</span> <span class="o">=</span> <span class="nx">monaco</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">editorContainer</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span>
        <span class="na">language</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">language</span><span class="p">,</span>
        <span class="na">tabSize</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">scrollBeyondLastLine</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="na">automaticLayout</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// è‡ªåŠ¨å¸ƒå±€</span>
        <span class="na">readOnly</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">})</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">editor</span><span class="p">)</span>

      <span class="c1">// ç›‘å¬å†…å®¹å˜åŒ–</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">onDidChangeModelContent</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>

      <span class="p">})</span>

      <span class="c1">// ç›‘å¬å¤±å»ç„¦ç‚¹äº‹ä»¶</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">onDidBlurEditorText</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
      <span class="p">});</span>
    <span class="p">},</span>
    <span class="c1">// è·å–ç¼–è¾‘æ¡†å†…å®¹</span>
    <span class="nx">getCodeContext</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span>
    <span class="p">},</span>
    <span class="c1">// è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </span>
    <span class="nx">format</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">editor</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="dl">'</span><span class="s1">anything</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">editor.action.formatDocument</span><span class="dl">'</span><span class="p">)</span>
      <span class="c1">// æˆ–è€…</span>
      <span class="c1">// this.editor.getAction(['editor.action.formatDocument']).run()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">scoped</span><span class="nt">&gt;</span>
<span class="nc">.editor</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div>

<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>

<p>æ ¹æ®å·¦è¾¹çš„é¡¹ç›®æ–‡ä»¶æ ‘ï¼Œé€‰ä¸­æ–‡ä»¶åï¼Œå³è¾¹çš„é¢æ¿åŠ¨æ€æ‰“å¼€è‡ªå®šä¹‰çš„ç»„ä»¶&lt;MonacoEditor&gt;ï¼Œè¿™é‡Œ:code=â€item.contentâ€ :language=â€item.suffixâ€ä¸¤ä¸ªå±æ€§å°±æ˜¯ä¸Šé¢æˆ‘è¯´åˆ°çš„åŠ¨æ€ä¼ å€¼äº†ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="n">tabs</span> <span class="n">v</span><span class="o">-</span><span class="n">model</span><span class="o">=</span><span class="s">"activeName"</span> <span class="n">closable</span> <span class="nd">@tab</span><span class="o">-</span><span class="n">remove</span><span class="o">=</span><span class="s">"removeFileTab"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="n">tab</span><span class="o">-</span><span class="n">pane</span>
  	<span class="n">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s">"item in fileTabList"</span>
    	<span class="o">:</span><span class="n">key</span><span class="o">=</span><span class="s">"item.path"</span>
      <span class="o">:</span><span class="n">label</span><span class="o">=</span><span class="s">"item.title"</span>
      <span class="o">:</span><span class="n">name</span><span class="o">=</span><span class="s">"item.name"</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nc">MonacoEditor</span> <span class="o">:</span><span class="n">code</span><span class="o">=</span><span class="s">"item.content"</span> <span class="o">:</span><span class="n">language</span><span class="o">=</span><span class="s">"item.suffix"</span> <span class="n">ref</span><span class="o">=</span><span class="s">"MonacoEditor"</span> <span class="n">style</span><span class="o">=</span><span class="s">"height: 830px"</span><span class="o">&gt;&lt;/</span><span class="nc">MonacoEditor</span><span class="o">&gt;</span>
	<span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="n">tab</span><span class="o">-</span><span class="n">pane</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="n">tabs</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>è¯»å–æ–‡ä»¶è·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿”å›ç»™å‰ç«¯ç”Ÿæˆæ–‡ä»¶æ ‘</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@ToString</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileTreeVO</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">filename</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">path</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Boolean</span> <span class="n">directory</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">suffix</span><span class="o">;</span>

    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FileTreeVO</span><span class="o">&gt;</span> <span class="n">children</span><span class="o">;</span>
<span class="o">}</span>

<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileUtil</span> <span class="o">{</span>
		<span class="cm">/**
     * æšä¸¾æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤¹
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">listFile</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">FileTreeVO</span><span class="o">&gt;</span> <span class="n">fileTree</span><span class="o">,</span> <span class="nc">File</span> <span class="n">dir</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">dir</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">File</span><span class="o">[]</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">dir</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">fs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">File</span> <span class="n">f</span> <span class="o">:</span> <span class="n">fs</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//éšè—æ–‡ä»¶ç±»å‹å°±ä¸ç”¨æ˜¾ç¤º</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">isHidden</span><span class="o">())</span> <span class="o">{</span>
                    <span class="k">continue</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="nc">FileTreeVO</span> <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileTreeVO</span><span class="o">();</span>
                <span class="n">vo</span><span class="o">.</span><span class="na">setFilename</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                <span class="n">vo</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
                <span class="n">vo</span><span class="o">.</span><span class="na">setDirectory</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">());</span>
                <span class="n">fileTree</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">vo</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">())</span> <span class="o">{</span>
                    <span class="n">vo</span><span class="o">.</span><span class="na">setChildren</span><span class="o">(</span><span class="nc">Lists</span><span class="o">.</span><span class="na">newLinkedList</span><span class="o">());</span>
                    <span class="n">listFile</span><span class="o">(</span><span class="n">vo</span><span class="o">.</span><span class="na">getChildren</span><span class="o">(),</span> <span class="n">f</span><span class="o">,</span> <span class="n">accessSuffix</span><span class="o">);</span>
                    <span class="n">vo</span><span class="o">.</span><span class="na">setSuffix</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">vo</span><span class="o">.</span><span class="na">setSuffix</span><span class="o">(</span><span class="nc">FilenameUtils</span><span class="o">.</span><span class="na">getExtension</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
                    
                  	<span class="k">try</span> <span class="o">{</span>
                    	<span class="n">vo</span><span class="o">.</span><span class="na">setContent</span><span class="o">(</span><span class="nc">FileUtils</span><span class="o">.</span><span class="na">readFileToString</span><span class="o">(</span><span class="n">f</span><span class="o">,</span> <span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
                  	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    	<span class="n">log</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"{},è¯»å–å¤±è´¥ï¼"</span><span class="o">,</span> <span class="n">f</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                  	<span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>å…·ä½“çš„æ•ˆæœå¦‚ä¸‹ï¼šè¿™ä¸ªç¼–è¾‘å™¨è¿˜æ˜¯å¾ˆæ¼‚äº®çš„ã€‚</p>

<p><img src="/images/2022-10-13-monaco-editor/image-20221013191911876.png" alt="image-20221013191911876" /></p>

<p><img src="/images/2022-10-13-monaco-editor/image-20221013192029604.png" alt="image-20221013192029604" /></p>

<h3 id="æœ€å">æœ€å</h3>

<p>ç¼–è¾‘å™¨çš„æ¨¡å‹å·²ç»æœ‰äº†ï¼Œè™½ç„¶å®ƒåªæ˜¯ä¸ªåŸºç¡€ç‰ˆï¼Œæˆ‘çœ‹äº†æœ‰äººå·²ç»æŠŠè¿™ä¸ªæ’ä»¶åšäº†æ‰©å±•èƒ½è¿æ¥è¿œç¨‹å¾—åˆ°javaçš„ä¸€äº›ä»£ç æç¤ºçš„åŠŸèƒ½ï¼Œç”±äºä¸ªäººå‰ç«¯èƒ½åŠ›æå…¶æœ‰é™ï¼Œæ‰€ä»¥è¿™ä¸ªé«˜çº§åŠŸèƒ½ç•™ç»™ä¸“é—¨çš„å‰ç«¯å¤§ä½¬å»å®Œå–„å§ã€‚</p>

<p>åç»­æˆ‘æŠŠæˆ‘å®ç°çš„ä»£ç è„šæ‰‹æ¶å’ŒMysqlè¿æ¥åˆ°POJOçš„ä¸‰å±‚ä»£ç çš„åšæ³•åˆ†äº«å‡ºæ¥ã€‚</p>

:ET